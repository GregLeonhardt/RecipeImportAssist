/*******************************  COPYRIGHT  ********************************/
/*
 *  Copyright (c) 2019 Gregory N. Leonhardt All rights reserved.
 *
 ****************************************************************************/

/******************************** JAVADOC ***********************************/
/**
 *  This file contains public function that makeup the external
 *  library components of the 'encode' library.
 *
 *  @note
 *
 ****************************************************************************/

/****************************************************************************
 *  Compiler directives
 ****************************************************************************/

#define ALLOC_ENCODE          ( "ALLOCATE STORAGE FOR ENCODE" )

/****************************************************************************
 * System Function API
 ****************************************************************************/

                                //*******************************************
#include <stdint.h>             //  Alternative storage types
#include <stdbool.h>            //  TRUE, FALSE, etc.
#include <stdio.h>              //  Standard I/O definitions
                                //*******************************************

/****************************************************************************
 * Application APIs
 ****************************************************************************/

                                //*******************************************
#include <main_api.h>           //  Global stuff for this application
#include <libtools_api.h>       //  My Tools Library
                                //*******************************************
#include <encode_rxf_api.h>     //  API for all encode_rxf_*        PUBLIC
#include <encode_ria_api.h>     //  API for all encode_ria_*        PUBLIC
#include <encode_txt_api.h>     //  API for all encode_txt_*        PUBLIC
#include <recipe_api.h>         //  API for all recipe_*            PUBLIC
                                //*******************************************
#include <encode_api.h>         //  API for all encode_*            PUBLIC
#include "encode_lib.h"         //  API for all ENCODE__*           PRIVATE
                                //*******************************************

/****************************************************************************
 * API Enumerations
 ****************************************************************************/

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

/****************************************************************************
 * Private Definitions
 ****************************************************************************/

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

/****************************************************************************
 * Private Structures
 ****************************************************************************/

//----------------------------------------------------------------------------
//----------------------------------------------------------------------------

/****************************************************************************
 * Private Storage Allocation
 ****************************************************************************/

//----------------------------------------------------------------------------
/**
 * @param in_file_name_p    Pointer to the input file name                  */
char                        *   in_file_name_p;
//----------------------------------------------------------------------------
/**
 * @param in_dir_name_p     Pointer to the input directory name             */
char                        *   in_dir_name_p;
//----------------------------------------------------------------------------
/**
 * @param out_file_name_p   Pointer to the output file name                 */
char                        *   out_directory_name_p;
//----------------------------------------------------------------------------

/****************************************************************************
 * Private Functions
 ****************************************************************************/

/****************************************************************************/
/**
 *  Main entry point for all encode formats.
 *
 *  @param  not_used            Required to be here but not used.
 *
 *  @return void                No return code from this function.
 *
 *  @note
 *
 ****************************************************************************/

void
encode_thread(
    void                        *   not_used
    )
{
    /**
     *  @param  recipe_p            Pointer to a recipe structure.          */
    struct  recipe_t            *   recipe_p;

    /************************************************************************
     *  Function Initialization
     ************************************************************************/

    encode_queue_id = queue_new( "ENCODE" );

    /************************************************************************
     *  Function
     ************************************************************************/

    //  Run for the life of the application
    while( 1 )
    {
        //  Get another recipe from the queue
        recipe_p = queue_get_payload( encode_queue_id );

        //  Did we get a new recipe to encode ?
        if ( recipe_p != NULL )
        {
            //  YES:    Go encode it.
//          encode_mmf( recipe_p );     //  Does Not Exist
//          encode_mx2( recipe_p );     //  Does Not Exist
//          encode_mxp( recipe_p );     //  Does Not Exist
//          encode_rxf( recipe_p );     //  Recipe XML Format
//          encode_ria( recipe_p );     //  Native Output Format
            encode_txt( recipe_p );     //  Generic Text Output Format
        }
    }

    /************************************************************************
     *  Function Exit
     ************************************************************************/

    //  DONE!
}

/****************************************************************************/
/**
 *  Set the input file name.
 *
 *  @param  data_p              Pointer to the input file name string.
 *
 *  @return void                No return code from this function.
 *
 *  @note
 *
 ****************************************************************************/

void
encode_set_if(
    char                        *   data_p
    )
{

    /************************************************************************
     *  Function Initialization
     ************************************************************************/


    /************************************************************************
     *  Function
     ************************************************************************/

    //  Save the input file name
    in_file_name_p = data_p;

    /************************************************************************
     *  Function Exit
     ************************************************************************/

    //  DONE!
}

/****************************************************************************/
/**
 *  Get the input file name.
 *
 *  @param  void                No parameters are passed in.
 *
 *  @return data_p              Pointer to the input file name string.
 *
 *  @note
 *
 ****************************************************************************/

char    *
encode_get_if(
    void
    )
{
    /**
     *  @param  data_p          Pointer to the output file name string.     */
    char                        *   data_p;

    /************************************************************************
     *  Function Initialization
     ************************************************************************/


    /************************************************************************
     *  Function
     ************************************************************************/

    //  Save the input file name
    data_p = in_file_name_p;

    /************************************************************************
     *  Function Exit
     ************************************************************************/

    //  DONE!
    return( data_p );
}

/****************************************************************************/
/**
 *  Set the input directory name.
 *
 *  @param  data_p              Pointer to the input directory name string.
 *
 *  @return void                No return code from this function.
 *
 *  @note
 *
 ****************************************************************************/

void
encode_set_dir(
    char                        *   data_p
    )
{

    /************************************************************************
     *  Function Initialization
     ************************************************************************/


    /************************************************************************
     *  Function
     ************************************************************************/

    //  Save the input file name
    in_dir_name_p = data_p;

    /************************************************************************
     *  Function Exit
     ************************************************************************/

    //  DONE!
}

/****************************************************************************/
/**
 *  Get the input directory name.
 *
 *  @param  void                No parameters are passed in.
 *
 *  @return data_p              Pointer to the input directory name string.
 *
 *  @note
 *
 ****************************************************************************/

char    *
encode_get_dir(
    void
    )
{
    /**
     *  @param  data_p          Pointer to the output file name string.     */
    char                        *   data_p;

    /************************************************************************
     *  Function Initialization
     ************************************************************************/


    /************************************************************************
     *  Function
     ************************************************************************/

    //  Save the input file name
    data_p = in_dir_name_p;

    /************************************************************************
     *  Function Exit
     ************************************************************************/

    //  DONE!
    return( data_p );
}

/****************************************************************************/
